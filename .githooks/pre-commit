#!/bin/bash

# Pre-commit hook for GitScrolls
# Validates style before allowing commits

# Only run validation on scroll files that are being committed
SCROLL_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep "scrolls/.*\.md$")

if [ -z "$SCROLL_FILES" ]; then
    # No scroll files being committed, skip validation
    exit 0
fi

echo "üîç Pre-commit: Validating GitScrolls style..."

# Run the master validation script
if bash .githooks/validate-gitscrolls-style.sh; then
    echo "‚úÖ Pre-commit validation passed!"
    exit 0
else
    echo -e "\n‚ùå Pre-commit validation failed!"
    echo "Fix the style issues above before committing."
    echo -e "\nTo bypass this check (not recommended), use: git commit --no-verify"
    exit 1
fi